<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuovo Studente</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
	   <!-- Utilizzo della sintassi racchiusa per il frammento -->
    <div th:replace="~{fragments/navbar :: navbar}"></div>
 <a href="/" class="btn btn-secondary mb-3">Torna alla Home</a>
<a th:href="@{/studenti/{id}/modifica(id=${studente.id})}" class="btn btn-secondary btn-sm">Modifica</a>
  <div class="container mt-5">
    <h1 class="text-center mb-5">
      <span class="text-primary">Crea Nuovo Studente</span>
    </h1>
    
    <form th:action="@{/studenti/nuovo}" th:object="${studente}" method="post" id="studenteForm">
      <div class="mb-3">
        <label for="nome" class="form-label">Nome</label>
        <input type="text" class="form-control" id="nome" name="nome" th:field="*{nome}" placeholder="Inserisci il nome">
      </div>
      <div class="mb-3">
        <label for="cognome" class="form-label">Cognome</label>
        <input type="text" class="form-control" id="cognome" name="cognome" th:field="*{cognome}" placeholder="Inserisci il cognome">
      </div>
      
      
      <div class="mb-3">
        <label for="id_classe" class="form-label">A quale classe appartiene (<span class="text-muted">Opzionale</span>)</label>
        
        <select class="form-control" id="id_classe" name="classe.id" >
          <option value="" th:text="'Seleziona una classe'"></option>
          <option th:each="classe : ${classi}" th:value="${classe.id}" th:text="${classe.id}">Classe</option>
        </select>
        
      </div>
      
      
      <div class="mb-3">     
        <label for="telefono" class="form-label">Telefono</label>
        <input type="text" class="form-control" id="telefono" name="telefono" th:field="*{telefono}"   placeholder="Inserisci il numero di telefono">
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" class="form-control" id="email" name="email" th:field="*{email}" placeholder="Inserisci l'indirizzo email">
      </div>
      
      <div class="mb-3">
        <label for="rifGenitore" class="form-label">Referente Genitore</label>
        <input type="text" class="form-control" id="rifGenitore" name="rifGenitore" th:field="*{rifGenitore}" placeholder="Inserisci il nome del referente genitore">
      </div>
      
      <div class="d-flex justify-content-end">
        <button type="submit" class="btn btn-primary"  id="submitButton">
          <span th:text="${studente.id != null} ? 'Salva Modifiche' : 'Crea Studente'">Crea Studente</span>
        </button>
      </div>
    </form>
    <a th:href="@{/studenti/{id}/modifica(id=${studente.id})}" class="btn btn-secondary btn-sm">Modifica</a>
    
     <div class="btn-group">
              <a th:href="@{/studenti/{id}(id=${studente.id})}"                  class="btn btn-primary btn-sm btn-rounded">Visualizza</a>
              <a th:href="@{/studenti/modifica/{id}(id=${studente.id})}"         class="btn btn-secondary btn-sm btn-rounded">Modifica</a>              
			  <a th:href="@{/studenti/cancella/{id}(id=${studente.id})}"            class="btn btn-danger btn-sm btn-rounded" >Elimina</a>
				
            </div>
  </div>

  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const form = document.getElementById("studenteForm");
      const submitButton = document.getElementById("submitButton");
      submitButton.disabled = true;
      form.addEventListener("input", function() {
        const inputs = form.querySelectorAll("input");
        const selects = form.querySelectorAll("select");
        let isValid = true;
        
        inputs.forEach(input => {
          if (!input.value.trim()) {
            isValid = false;
          }
        });
        
        selects.forEach(select => {
          if (!select.value.trim()) {
            isValid = false;
          }
        });
        
        submitButton.disabled = !isValid;
      });
    });
</script>
<!-- Includi jQuery, Popper.js e Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</body>
</html>
